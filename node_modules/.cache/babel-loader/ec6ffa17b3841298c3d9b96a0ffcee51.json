{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Fabi\\\\Desktop\\\\Uni\\\\Master\\\\4_Semester\\\\MA\\\\WebGIS\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'ol/ol.css';import Sidebar from'./Sidebar';import Tab from'./Tab';import ToggleButton from'./ToogleButton';import TabContent from'./TabContent';import{Feature}from'ol';import{activeToggleColor}from'../utils/MapStyles';import Button from'./Button';import{wfsTransaction,usedIcons,updateParameters,geoserverFetchUrl}from'../utils/MapConfig';import Legend from'./Legend';import Instructions from'./Instructions';import Home from'./Home';import Image from'./Image';import logo from'../img/rub_logo.png';import Loading from'./Loading';var mapListeners=[];var MapSidebar=function MapSidebar(props){var map=props.map;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),collapsed=_useState2[0],setCollapsed=_useState2[1];var _useState3=useState('home'),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),toggleValue=_useState6[0],setToggleValue=_useState6[1];var _useState7=useState(new Feature()),_useState8=_slicedToArray(_useState7,2),selectedFeature=_useState8[0],setSelectedFeature=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),transactionResponse=_useState10[0],setTransactionResponse=_useState10[1];var _useState11=useState(localStorage.getItem('VgiUserToken')),_useState12=_slicedToArray(_useState11,2),token=_useState12[0],setToken=_useState12[1];function hashUser(){fetch('http://corona.geomatik.ruhr-uni-bochum.de/api/hash').then(function(response){return response.json();}).then(function(value){return localStorage.setItem('VgiUserToken',value);});}function handleToken(newToken){setToken(newToken);}var checkFeature=selectedFeature.getKeys();useEffect(function(){if(localStorage.getItem('VgiUserToken')===null){hashUser();}else{return;}},[]);function onClose(){setCollapsed(true);//@ts-ignore\nsetSelected(undefined);}function onOpen(id){setCollapsed(false);//@ts-ignore\nsetSelected(id);};function onToggleChange(){setToggleValue(!toggleValue);selectedFeature.set('visited',!toggleValue);}var saveData=function saveData(){if(selectedFeature){setTransactionResponse('Updating');if(selectedFeature.getId()){selectedFeature.unset('selected');selectedFeature.getId();selectedFeature.setGeometryName('geom');selectedFeature.set('visited',toggleValue);selectedFeature.set('edited_by',token);var xmlString=new XMLSerializer().serializeToString(wfsTransaction.writeTransaction([],[selectedFeature],[],updateParameters));var body={xml:xmlString};fetch(geoserverFetchUrl,{method:'POST',body:JSON.stringify(body)}).then(function(){return setTransactionResponse(\"Geb\\xE4ude mit id \".concat(selectedFeature.getId(),\" wurde erfasst. Danke f\\xFCr deinen Beitrag.\"));}).then(function(){return setTimeout(function(){return setTransactionResponse('');},3000);}).then(function(){//@ts-ignore\nvar layer=map.getLayers().getArray()[1];layer.getSource().clear();layer.getSource().refresh();}).catch(function(error){return console.log('Die Änderungen konnten nicht gespeichert werden.');});}else{setTransactionResponse('Kein Gebäude selektiert.');setTimeout(function(){return setTransactionResponse('');},3000);return;}}else{setTransactionResponse('Die Änderungen konnten nicht gespeichert werden, probiere es bitte erneut.');setTimeout(function(){return setTransactionResponse('');},3000);return;}};var prevSelected=[];if(map){if(mapListeners.length===0){var mapListener=map.on('click',function(e){map.forEachFeatureAtPixel(e.pixel,function(feature){var castedFeature=feature;prevSelected.unshift(castedFeature);setSelectedFeature(prevSelected[0]);prevSelected[0].set('selected',true);if(prevSelected.length>1){prevSelected[1].set('selected',false);}prevSelected.splice(1);});});mapListeners.push(mapListener);}}return React.createElement(React.Fragment,null,React.createElement(Sidebar,{id:\"sidebar\",collapsed:collapsed,selected:selected,onClose:onClose//@ts-ignore\n,doOpen:onOpen},React.createElement(Tab,{id:\"home\",header:\"Projektbeschreibung\",faIcon:usedIcons[0]},React.createElement(TabContent,{content:React.createElement(React.Fragment,null,React.createElement(Home,null),React.createElement(Button,{buttonText:\"Informationen \",faIcon:usedIcons[1],clickButton:function clickButton(){return setSelected('instructions');}}),React.createElement(Image,{altText:\"RUB-Logo\",img:logo,link:\"https://www.geographie.ruhr-uni-bochum.de/forschung/geomatik/home-news/\"}),React.createElement(\"p\",{className:\"imprinttext\",onClick:function onClick(){return setSelected('instructions');}},\"Impressum | Datenschutz\"))})),React.createElement(Tab,{id:\"locations\",header:\"Besuchte Geb\\xE4ude\",faIcon:usedIcons[2]},React.createElement(TabContent,{content:React.createElement(React.Fragment,null,React.createElement(Legend,{title:\"Legende\"}),React.createElement(ToggleButton,{id:\"toggleVisited\",isOn:selectedFeature.get('visited'),isOnColor:activeToggleColor,handleToggle:onToggleChange}),checkFeature.length===0?'Kein Gebäude gewählt.':selectedFeature.get('visited')===false?'Gewähltes Gebäude nicht besucht.':'Gewähltes Gebäude besucht.',transactionResponse!=='Updating'?React.createElement(Button,{buttonText:\"Update\",response:transactionResponse,clickButton:saveData}):React.createElement(Loading,null))})),React.createElement(Tab,{id:\"instructions\",header:\"Informationen\",faIcon:usedIcons[1],anchor:\"bottom\"},React.createElement(TabContent,{content:React.createElement(React.Fragment,null,React.createElement(Instructions,{token:token,handleToken:handleToken}))}))));};export default MapSidebar;","map":{"version":3,"sources":["C:/Users/Fabi/Desktop/Uni/Master/4_Semester/MA/WebGIS/app/src/components/MapSidebar.tsx"],"names":["React","useState","useEffect","Sidebar","Tab","ToggleButton","TabContent","Feature","activeToggleColor","Button","wfsTransaction","usedIcons","updateParameters","geoserverFetchUrl","Legend","Instructions","Home","Image","logo","Loading","mapListeners","MapSidebar","props","map","collapsed","setCollapsed","selected","setSelected","toggleValue","setToggleValue","selectedFeature","setSelectedFeature","transactionResponse","setTransactionResponse","localStorage","getItem","token","setToken","hashUser","fetch","then","response","json","value","setItem","handleToken","newToken","checkFeature","getKeys","onClose","undefined","onOpen","id","onToggleChange","set","saveData","getId","unset","setGeometryName","xmlString","XMLSerializer","serializeToString","writeTransaction","body","xml","method","JSON","stringify","setTimeout","layer","getLayers","getArray","getSource","clear","refresh","catch","error","console","log","prevSelected","length","mapListener","on","e","forEachFeatureAtPixel","pixel","feature","castedFeature","unshift","splice","push","get"],"mappings":"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","sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport 'ol/ol.css';\r\nimport { IMapSidebarProps, TSelectableTabs } from '../types/types';\r\nimport Sidebar from './Sidebar';\r\nimport Tab from './Tab';\r\nimport ToggleButton from './ToogleButton';\r\nimport TabContent from './TabContent';\r\nimport { Feature, MapBrowserEvent } from 'ol';\r\nimport { FeatureLike } from 'ol/Feature';\r\nimport { activeToggleColor } from '../utils/MapStyles';\r\nimport Button from './Button';\r\nimport { wfsTransaction, usedIcons, updateParameters, geoserverFetchUrl } from '../utils/MapConfig';\r\nimport VectorLayer from 'ol/layer/Vector';\r\nimport Legend from './Legend';\r\nimport Instructions from './Instructions';\r\nimport Home from './Home';\r\nimport Image from './Image';\r\nimport logo from '../img/rub_logo.png';\r\nimport Loading from './Loading';\r\n\r\nconst mapListeners = [];\r\n\r\nconst MapSidebar = (props: IMapSidebarProps): JSX.Element => {\r\n\r\n    const { map } = props;\r\n\r\n    const [collapsed, setCollapsed] = useState(false);\r\n    const [selected, setSelected] = useState<TSelectableTabs>('home');\r\n    const [toggleValue, setToggleValue] = useState(false);\r\n    const [selectedFeature, setSelectedFeature] = useState(new Feature());\r\n    const [transactionResponse, setTransactionResponse] = useState('');\r\n    const [token, setToken] = useState(localStorage.getItem('VgiUserToken'));\r\n\r\n    function hashUser() {\r\n        fetch('http://corona.geomatik.ruhr-uni-bochum.de/api/hash')\r\n            .then(response => response.json())\r\n            .then(value => localStorage.setItem('VgiUserToken', value))\r\n    }\r\n\r\n    function handleToken(newToken: string | null) {\r\n        setToken(newToken);\r\n    }\r\n\r\n    const checkFeature = selectedFeature.getKeys()\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem('VgiUserToken') === null) {\r\n            hashUser()\r\n        }\r\n        else { return }\r\n    }, [])\r\n\r\n    function onClose() {\r\n        setCollapsed(true);\r\n        //@ts-ignore\r\n        setSelected(undefined);\r\n    }\r\n    function onOpen(id: string) {\r\n        setCollapsed(false)\r\n        //@ts-ignore\r\n        setSelected(id)\r\n    };\r\n\r\n    function onToggleChange() {\r\n        setToggleValue(!toggleValue)\r\n        selectedFeature.set('visited', !toggleValue)\r\n    }\r\n\r\n    const saveData = () => {\r\n        if (selectedFeature) {\r\n            setTransactionResponse('Updating')\r\n            if (selectedFeature.getId()) {\r\n                selectedFeature.unset('selected')\r\n                selectedFeature.getId();\r\n                selectedFeature.setGeometryName('geom');\r\n                selectedFeature.set('visited', toggleValue);\r\n                selectedFeature.set('edited_by', token);\r\n                let xmlString = new XMLSerializer().serializeToString(\r\n                    wfsTransaction.writeTransaction([], [selectedFeature], [], updateParameters)\r\n                )\r\n                let body = {\r\n                    xml: xmlString,\r\n                }\r\n                fetch(geoserverFetchUrl, {\r\n                    method: 'POST',\r\n                    body: JSON.stringify(body)\r\n                })\r\n                    .then(() => setTransactionResponse(`Gebäude mit id ${selectedFeature.getId()} wurde erfasst. Danke für deinen Beitrag.`))\r\n                    .then(() => setTimeout(() => setTransactionResponse(''), 3000))\r\n                    .then(() => {\r\n                        //@ts-ignore\r\n                        const layer: VectorLayer = map!.getLayers().getArray()[1];\r\n                        layer.getSource().clear();\r\n                        layer.getSource().refresh();\r\n                    })\r\n                    .catch(error => console.log('Die Änderungen konnten nicht gespeichert werden.'));\r\n            }\r\n            else {\r\n                setTransactionResponse('Kein Gebäude selektiert.')\r\n                setTimeout(() => setTransactionResponse(''), 3000);\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            setTransactionResponse('Die Änderungen konnten nicht gespeichert werden, probiere es bitte erneut.')\r\n            setTimeout(() => setTransactionResponse(''), 3000);\r\n            return;\r\n        }\r\n    }\r\n\r\n    let prevSelected: Feature[] = []\r\n    if (map) {\r\n        if (mapListeners.length === 0) {\r\n            const mapListener = map.on('click', function (e: MapBrowserEvent): void {\r\n                map!.forEachFeatureAtPixel(e.pixel, (feature: Feature | FeatureLike): void => {\r\n                    let castedFeature: Feature = feature as Feature;\r\n                    prevSelected.unshift(castedFeature)\r\n                    setSelectedFeature(prevSelected[0]);\r\n                    prevSelected[0].set('selected', true);\r\n                    if (prevSelected.length > 1) {\r\n                        prevSelected[1].set('selected', false);\r\n                    }\r\n                    prevSelected.splice(1)\r\n                });\r\n            });\r\n            mapListeners.push(mapListener);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Sidebar\r\n                id='sidebar'\r\n                collapsed={collapsed}\r\n                selected={selected}\r\n                onClose={onClose}\r\n                //@ts-ignore\r\n                doOpen={onOpen}\r\n            >\r\n                <Tab\r\n                    id='home'\r\n                    header='Projektbeschreibung'\r\n                    faIcon={usedIcons[0]}\r\n                >\r\n                    <TabContent content={\r\n                        <>\r\n                            <Home />\r\n                            <Button\r\n                                buttonText={`Informationen `}\r\n                                faIcon={usedIcons[1]}\r\n                                clickButton={() => setSelected('instructions')}\r\n                            />\r\n                            <Image\r\n                                altText='RUB-Logo'\r\n                                img={logo}\r\n                                link='https://www.geographie.ruhr-uni-bochum.de/forschung/geomatik/home-news/'\r\n                            />\r\n                           <p className='imprinttext' onClick={() => setSelected('instructions')}>Impressum | Datenschutz</p>\r\n                        </>\r\n                    }\r\n                    />\r\n                </Tab>\r\n                <Tab\r\n                    id='locations'\r\n                    header='Besuchte Gebäude'\r\n                    faIcon={usedIcons[2]}\r\n                >\r\n                    <TabContent content={\r\n                        <>\r\n                            <Legend\r\n                                title='Legende'\r\n                            />\r\n                            <ToggleButton\r\n                                id='toggleVisited'\r\n                                isOn={selectedFeature.get('visited')}\r\n                                isOnColor={activeToggleColor}\r\n                                handleToggle={onToggleChange}\r\n                            />\r\n                            {checkFeature.length === 0 ?\r\n                                'Kein Gebäude gewählt.'\r\n                                :\r\n                                selectedFeature.get('visited') === false ? 'Gewähltes Gebäude nicht besucht.' : 'Gewähltes Gebäude besucht.'\r\n                            }\r\n                        \r\n                            {\r\n                                transactionResponse !== 'Updating' ?\r\n                                    <Button\r\n                                        buttonText='Update'\r\n                                        response={transactionResponse}\r\n                                        clickButton={saveData}\r\n                                    />\r\n                                    :\r\n                                    <Loading />\r\n                            }\r\n                        </>\r\n                    } />\r\n                </Tab>\r\n                <Tab\r\n                    id='instructions'\r\n                    header='Informationen'\r\n                    faIcon={usedIcons[1]}\r\n                    anchor='bottom'\r\n                >\r\n                    <TabContent content={\r\n                        <>\r\n                            <Instructions\r\n                                token={token}\r\n                                handleToken={handleToken}\r\n                            />\r\n                        </>\r\n                    }\r\n                    />\r\n                </Tab>\r\n            </Sidebar>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MapSidebar;"]},"metadata":{},"sourceType":"module"}