{"ast":null,"code":"import Style from \"ol/style/Style\";\nimport Stroke from \"ol/style/Stroke\";\nimport Fill from \"ol/style/Fill\";\nimport Circle from \"ol/geom/Circle\";\nimport { getVectorContext } from \"ol/render\";\nimport easeOut from 'ol/easing';\nexport const activeToggleColor = 'rgba(141,174,16,1)';\nexport const strokeOpacity = 0.75;\nexport const fillOpacity = 0.25;\nexport const selectedColor = [`rgba(141,174, 16,${strokeOpacity})`, `rgba(141,174, 16,${fillOpacity})`];\nexport const defaultColor = [`rgba(0,53,96,${strokeOpacity})`, `rgba(0,103,188,${fillOpacity})`];\nexport const trackColor = [`rgba(168,0,2,${strokeOpacity})`, `rgba(50,188,0,${strokeOpacity})`];\nexport const insertedStyle = new Style({\n  stroke: new Stroke({\n    color: trackColor[1],\n    width: 2\n  })\n});\nexport const selectedStyle = new Style({\n  stroke: new Stroke({\n    color: selectedColor[0],\n    width: 3\n  }),\n  fill: new Fill({\n    color: selectedColor[1]\n  })\n});\nexport function defaultStyle(feature) {\n  let style = new Style({\n    stroke: new Stroke({\n      color: feature.get('visited') ? selectedColor[0] : defaultColor[0],\n      width: 1\n    }),\n    fill: new Fill({\n      color: feature.get('visited') ? selectedColor[1] : defaultColor[1]\n    })\n  });\n  return style;\n}\nvar duration = 3000;\n\nfunction flash(feature) {\n  var start = new Date().getTime();\n  var listenerKey = tileLayer.on('postrender', animate);\n\n  function animate(event) {\n    var vectorContext = getVectorContext(event);\n    var frameState = event.frameState;\n    var flashGeom = feature.getGeometry().clone();\n    var elapsed = frameState.time - start;\n    var elapsedRatio = elapsed / duration; // radius will be 5 at start and 30 at end.\n\n    var radius = easeOut(elapsedRatio) * 25 + 5;\n    var opacity = easeOut(1 - elapsedRatio);\n    var style = new Style({\n      image: new Circle({\n        radius: radius,\n        stroke: new Stroke({\n          color: 'rgba(255, 0, 0, ' + opacity + ')',\n          width: 0.25 + opacity\n        })\n      })\n    });\n    vectorContext.setStyle(style);\n    vectorContext.drawGeometry(flashGeom);\n\n    if (elapsed > duration) {\n      unByKey(listenerKey);\n      return;\n    } // tell OpenLayers to continue postrender animation\n\n\n    map.render();\n  }\n}","map":{"version":3,"sources":["C:/Users/Fabi/Desktop/Uni/Master/4. Semester/MA/WebGIS/app/src/utils/MapStyles.tsx"],"names":["Style","Stroke","Fill","Circle","getVectorContext","easeOut","activeToggleColor","strokeOpacity","fillOpacity","selectedColor","defaultColor","trackColor","insertedStyle","stroke","color","width","selectedStyle","fill","defaultStyle","feature","style","get","duration","flash","start","Date","getTime","listenerKey","tileLayer","on","animate","event","vectorContext","frameState","flashGeom","getGeometry","clone","elapsed","time","elapsedRatio","radius","opacity","image","setStyle","drawGeometry","unByKey","map","render"],"mappings":"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","sourcesContent":["import Style from \"ol/style/Style\";\r\nimport Stroke from \"ol/style/Stroke\";\r\nimport Fill from \"ol/style/Fill\";\r\nimport { FeatureLike } from \"ol/Feature\";\r\nimport Circle from \"ol/geom/Circle\";\r\nimport { getVectorContext } from \"ol/render\";\r\nimport easeOut from 'ol/easing';\r\n\r\nexport const activeToggleColor: string = 'rgba(141,174,16,1)';\r\nexport const strokeOpacity: number = 0.75;\r\nexport const fillOpacity: number = 0.25;\r\nexport const selectedColor: string[] = [\r\n    `rgba(141,174, 16,${strokeOpacity})`,\r\n    `rgba(141,174, 16,${fillOpacity})`,\r\n];\r\nexport const defaultColor: string[] = [\r\n    `rgba(0,53,96,${strokeOpacity})`,\r\n    `rgba(0,103,188,${fillOpacity})`,\r\n];\r\nexport const trackColor: string[] = [\r\n    `rgba(168,0,2,${strokeOpacity})`,\r\n    `rgba(50,188,0,${strokeOpacity})`\r\n] \r\n\r\nexport const insertedStyle: Style = new Style({\r\n    stroke: new Stroke({\r\n        color: trackColor[1],\r\n        width: 2,\r\n    }),\r\n});\r\n\r\nexport const selectedStyle = new Style({\r\n    stroke: new Stroke({\r\n        color: selectedColor[0],\r\n        width: 3,\r\n    }),\r\n    fill: new Fill({\r\n        color: selectedColor[1],\r\n    })\r\n});\r\n\r\nexport function defaultStyle(feature: FeatureLike): Style {\r\n    let style: Style = new Style({\r\n        stroke: new Stroke({\r\n            color: feature.get('visited') ? selectedColor[0] : defaultColor[0],\r\n            width: 1\r\n        }),\r\n        fill: new Fill({\r\n            color: feature.get('visited') ? selectedColor[1] : defaultColor[1],\r\n        })\r\n    });\r\n    return style;\r\n}\r\n\r\nvar duration = 3000;\r\nfunction flash(feature) {\r\n  var start = new Date().getTime();\r\n  var listenerKey = tileLayer.on('postrender', animate);\r\n\r\n  function animate(event: any) {\r\n    var vectorContext = getVectorContext(event);\r\n    var frameState = event.frameState;\r\n    var flashGeom = feature.getGeometry().clone();\r\n    var elapsed = frameState.time - start;\r\n    var elapsedRatio = elapsed / duration;\r\n    // radius will be 5 at start and 30 at end.\r\n    var radius = easeOut(elapsedRatio) * 25 + 5;\r\n    var opacity = easeOut(1 - elapsedRatio);\r\n\r\n    var style = new Style({\r\n      image: new Circle({\r\n        radius: radius,\r\n        stroke: new Stroke({\r\n          color: 'rgba(255, 0, 0, ' + opacity + ')',\r\n          width: 0.25 + opacity\r\n        })\r\n      })\r\n    });\r\n\r\n    vectorContext.setStyle(style);\r\n    vectorContext.drawGeometry(flashGeom);\r\n    if (elapsed > duration) {\r\n      unByKey(listenerKey);\r\n      return;\r\n    }\r\n    // tell OpenLayers to continue postrender animation\r\n    map.render();\r\n  }\r\n}\r\n\r\n "]},"metadata":{},"sourceType":"module"}